<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<body style="margin:0;">

<model-viewer id="viewer"
  src="otomat.glb"
  alt="3D model"
  auto-rotate
  camera-controls
  environment-image="2.hdr"
  poster="loading.png"
  orbit-sensitivity="3"
  tone-mapping="aces"
  exposure="2"
  shadow-intensity="1"
  style="width:100%; height:100%; background: rgb(208, 208, 208); position:relative;">
  
  <!-- Sol üst köşe butonu -->
  <button id="fullscreenBtn"
    style="
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    ">
    ⛶
  </button>

</model-viewer>

<script>
  const btn = document.getElementById("fullscreenBtn");
  const viewer = document.getElementById("viewer");
  const targetUrl = "https://sasteknoloji.github.io/3d-model-viewer-klasik-semaver/";

  btn.addEventListener("click", async () => {
    try {
      if (!document.fullscreenElement) {
        // Fullscreen dene
        await viewer.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    } catch (err) {
      console.warn("Fullscreen çalışmadı → muhtemelen WebView:", err);
      redirectToBrowser();
    }
  });

  function redirectToBrowser() {
    const ua = navigator.userAgent || navigator.vendor || window.opera;

    if (/android/i.test(ua)) {
      // ANDROID → Chrome’da açmayı dene
      window.location.href = "intent://" + targetUrl.replace(/^https?:\/\//, "") +
        "#Intent;scheme=https;package=com.android.chrome;end";
    } else if (/iPhone|iPad|iPod/i.test(ua)) {
      // IOS → Safari’de açmayı dene
      window.location.href = "x-safari://" + targetUrl.replace(/^https?:\/\//, "");
    } else {
      // Fallback → Normal link
      window.location.href = targetUrl;
    }
  }
</script>

</body>
